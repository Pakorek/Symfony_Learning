{% extends "base.html.twig" %}


{% block body %}
    <section class="container" id="get_serie">
        <form action="" method="get">
            <fieldset>
                <legend>Rechercher l'id d'une série</legend>

                <input type="text" name="search_id" id="search_id" placeholder="ex: Mr Robot, Breaking Bad, ...">
                <label for="search_id"></label>

                <button type="submit">Rechercher</button>
            </fieldset>
        </form>
        <br>
        <form action="" method="get">
            <fieldset>
                <legend>Obtenir les détails grâce à l'id</legend>

                <input type="text" name="search_by_id" id="search_by_id" placeholder="ex: tt2021155">
                <label for="search_by_id"></label>

                <button type="submit">Rechercher</button>
            </fieldset>
        </form>

        {% if series is defined %}
            <article>
                <h1>Résultats de la recherche d'ID avec "{{ series.expression }}"</h1>

                {% for result in series.results %}
                    <ul>
                        <li>Title : {{ result.title }}</li>
                        <li>API ID : {{ result.id }}</li>
                    </ul>
                {% else %}
                    Aucune série trouvée.
                {% endfor %}
            </article>
        {% endif %}

        <br><br>

        {% if infos is defined %}
            <article>
                <h1>Résultats obtenus avec id = {{ infos.id }}</h1>

                <ul>
                    <li>Title : {{ infos.title }}</li>
                    <li>Full Title : {{ infos.fullTitle }}</li>
                    <li>Year : {{ infos.year }}</li>
                    <li>Seasons : {{ infos.tvSeriesInfo.seasons|length }}</li>
                    <li>Runtime : {{ infos.runtimeMins }} minutes</li>
                    <li>Synopsis : {{ infos.plot }}</li>
                    <li>Image : {{ infos.image }}</li>
                </ul>

                {% if details is defined %}
                    <h3>Les saisons en détails</h3>
                    {% for season in details %}
                        <ul>
                            <li><h4>Season {{ loop.index }}</h4></li>
                            <li>Episodes : {{ season.episodes|length }}</li>
                            <ul>
                                {% for episode in season.episodes %}
                                    <li>Episode {{ episode.episodeNumber }}</li>
                                    <li><h6>Title : </h6>{{ episode.title }}</li>
                                    <li><h6>Released : </h6>{{ episode.released }}</li>
                                    <li><h6>Synopsis : </h6>{{ episode.plot }}</li>
                                    <li>Image : {{ episode.image }}</li>
                                {% endfor %}
                            </ul>
                        </ul>

                    {% endfor %}
                {% endif %}
            </article>
        {% endif %}
    </section>
{% endblock %}
